<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Q-Tower</title>
	<link href="./css/qtower.css" type="text/css" rel="StyleSheet"/>
	<style>
	</style>
	<script src="lib/jquery-1.6.1.js" type="text/javascript" charset="utf-8"></script>
	<script src="lib/curl.js"></script>
	<script>
		// some <script data-main=""> semantics to reduce this boilerplate 
		console.log("requiring qtower");
		require({
			paths: {
				assets: './assets'
			}
		},[
			'lib/rosewood',
			'lib/lang',
			'lib/config',
			'lib/tester'
		], function(rw, lang, config, game){
			var stageNode = $("#playarea"),
				w = stageNode.css("width"),
				h = stageNode.css("height");
			console.log("stage dimension: ", w, h);
			config.set({
				assetsDir: './assets',
				toolbarNode: document.getElementById("toolbar"),
				menuNode: document.getElementById("shopMenu"),
				bgNode: document.getElementById("bg"),
				stageNode:  stageNode, 
				mapWidth: parseInt(w, 10), 
				mapHeight: parseInt(h, 10),
			});
			window.rw = rw;
			window.game = game;
			game.initGame(function(){
				game.start();
			});
		}); 
	</script>
</head> 
<body> 
<div id="container">
  <div id="bg"> </div> 
  <div id="playarea"> </div> 
  <div id="shopMenu"></div>
  <div id="toolbar">
		<input type="button" value="start" onclick="window.game.start();">
		&nbsp;
		<input type="button" value="stop" onclick="rw.stop();">
		&nbsp;
		<input type="button" value="menu mode" onclick="game.setMode('menu');">
  </div>
</div>
</body> 
</html> 
